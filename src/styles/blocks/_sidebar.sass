$icons-size: 24px

@mixin themed-colors($category-color)
  background: linear-gradient(to bottom, darken($category-color, 10%) 0%, darken($category-color, 20%) 100%)

@mixin collapsed-sidebar()
  .sidebar
    &__social,
    &__name,
    &__badge,
    &__separator
      display: none !important

    &__icon
      margin: 0
  

.sidebar
  position: fixed
  left: 0
  top: 0
  display: flex
  flex-direction: column
  order: 1
  padding: $gutter-width * 4 $gutter-width $gutter-width / 1.5
  z-index: 3
  width: 25%
  max-width: $sidebar-width
  height: 100vh
  min-width: 320px
  background: rgba($clr-black, $small-opacity / 2)
  transition: $base-transition

  &--opened
    background: rgba($clr-black, $half-opacity)
  
  &--notransition
    transition: $no-transition

  &--collapsed
    @include collapsed-sidebar

    width: $sidebar-collapsed-width
    min-width: $sidebar-collapsed-width

  &--blured
    @include blur()

    @media #{$mb-dw}
      display: none

  @media #{$lg-dw}
    position: fixed
    top: 0
    left: 0

  @media #{$mb-dw}
    position: sticky
    top: initial
    bottom: 0
    left: 0
    width: 100% !important
    height: $sidebar-mobile-height !important
    min-width: initial
    max-width: initial
    max-height: $sidebar-mobile-height !important
    order: 3
    padding: 0 !important

  &__gradient
    position: absolute
    top: 0
    left: 0
    z-index: -1
    width: 100%
    height: 100%
    opacity: $transparent-opacity
    transition: $slow-transition

    &--active
      opacity: $tiny-opacity

    &--dashboard
      @include themed-colors($clr-dashboard)

    &--games
      @include themed-colors($clr-games)

    &--tvshows
      @include themed-colors($clr-tvshows)

    &--films
      @include themed-colors($clr-films)

    &--anime
      @include themed-colors($clr-anime)

    &--books
      @include themed-colors($clr-books)


  &__hamburger
    position: absolute
    top: $gutter-width
    left: $gutter-width
    z-index: 10

    @media #{$mb-dw}
      display: none !important

  &__separator
    width: 100%
    height: 1px
    background: rgba($clr-grey, $tiny-opacity)
    margin-top: auto

  &__social
    display: flex
    align-items: center
    margin-top: $gutter-width / 1.5

  &__soclink
    position: relative
    display: flex
    justify-content: center
    align-items: center
    margin-right: $gutter-width / 2
    opacity: $small-opacity
    transition: $base-transition

    &:hover
      opacity: $active-opacity


  &__socicon
    @include icon-size(strip-unit($icons-size), strip-unit($icons-size))
    fill: $clr-white


  &__menu
    user-select: none
    
    @media #{$mb-dw}
      display: flex
      justify-content: space-between
      align-items: center
      height: 100%
      padding: 0 $gutter-width


  &__link
    position: relative
    display: flex
    align-items: center
    z-index: 2
    height: $ui-height
    color: rgba($clr-white, $half-opacity)    

    &:first-child
      margin-bottom: $gutter-width/2

    &:hover
      color: rgba($clr-white, $barely-opacity)

      .sidebar
        &__bookmark
          &--passive
            opacity: $active-opacity

    @media #{$mb-dw}
      margin-bottom: 0 !important
      margin-right: $gutter-width/3
      margin-left: $gutter-width/3

    &--active
      color: $clr-white !important

      .sidebar
        &__bookmark
          &--passive
            opacity: $transparent-opacity !important

          &--active
            opacity: $active-opacity


  &__icon
    @include icon-size(strip-unit($icons-size), strip-unit($icons-size))
    margin-right: $gutter-width/3

    position: relative


  &__bookmark
    @include icon-size(strip-unit($icons-size), strip-unit($icons-size))

    position: absolute
    top: 0
    left: 0
    fill: $clr-white
    transition: $base-transition

    &--passive
      opacity: $half-opacity

    &--active
      opacity: $transparent-opacity


  &__name
    font-weight: 500
    white-space: nowrap
    line-height: 1

  
  &__badge
    margin-left: auto
